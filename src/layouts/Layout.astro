---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import logo from '../assets/logo.png';

interface Props {
	title: string;
}

const { title } = Astro.props;

const allArticles = await getCollection('articles');
// Sort by date desc
const sortedArticles = allArticles.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const recentArticles = sortedArticles.slice(0, 5);
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="shortcut icon" type="image/x-icon" href="/resource/favicon/favicon.ico">
		<meta name="description"
			content="ソフトウェアと文字が好きな大学生、Ulibooooのポートフォリオサイトです。Rustで開発したCLIツールや、技術記事（Zenn/note）の情報をまとめています。">
		<meta property="og:title" content="about uliboooo" />
		<meta property="og:description" content="describe about uliboooo" />
		<meta property="og:image" content="https://about.uliboooo.dev/resource/logo.png" />
		<meta property="og:url" content="https://about.uliboooo.dev/" />
		<meta property="og:type" content="website" />
		<meta property="og:site_name" content="about uliboooo" />

		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:image" content="https://about.uliboooo.dev/resource/logo.png" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body>
        <div class="container">
            <header class="site-header">
                <div class="logo">
                    <a href="/">
                        <Image src={logo} alt="Logo" height={50} />
                    </a>
                </div>
                <nav class="menu">
                    <a href="/">All Articles</a>
                    <a href="/tags">List by Tag</a>
                </nav>
                <div class="info">
                    <a href="https://about.uliboooo.dev/" target="_blank">About Me</a>
                    <a href="https://github.com/Uliboooo" target="_blank">GitHub</a>
                    <a href="https://x.com/Uliboooo" target="_blank">X</a>
                </div>
            </header>
            <main>
                <div class="content">
                    <slot />
                </div>
                <aside class="sidebar">
                    <h3>Previous Articles</h3>
                    <ul>
                        {recentArticles.map(article => (
                            <li><a href={`/articles/${article.slug}`}>{article.data.title}</a></li>
                        ))}
                    </ul>
                </aside>
            </main>
            <footer>
                <p>&copy; 2026 Uliboooo. All rights reserved.</p>
                <a href="https://github.com/Uliboooo/blog">View Source</a>
            </footer>
        </div>
	</body>
</html>

<style is:global>
    :root {
        --font-serif: "Times New Roman", "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Sans Serif Interface", "Noto Serif JP", "MS Mincho", "IPAmjMincho", serif;
        --font-sans: "Helvetica Neue", "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Noto Sans JP", Arial, Meiryo, sans-serif;
        --font-mono: Menlo, Monaco, Lucida Console, "Liberation Mono", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Courier New", monospace;
        --bg-color: #fcfcfc;
    }
    
    html {
        background-color: var(--bg-color);
        font-family: var(--font-sans);
    }
    
    body {
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        min-height: 100vh;
    }

    .container {
        width: 80%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem 0;
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .site-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 1rem;
        border-bottom: 1px solid #ccc;
        font-family: var(--font-serif);
    }

    .menu {
        display: flex;
        gap: 1rem;
    }

    .info {
        display: flex;
        gap: 1rem;
        font-size: 0.9rem;
    }

    main {
        display: flex;
        gap: 2rem;
        flex: 1;
        flex-direction: row; /* Ensure row for 8:2 split */
    }

    .content {
        flex: 8;
        min-width: 0; 
    }

    .sidebar {
        flex: 2;
        border-left: 1px solid #eee;
        padding-left: 1rem;
    }
    .sidebar ul {
        padding-left: 1.2rem;
    }
    .sidebar li {
        margin-bottom: 0.5rem;
    }

    footer {
        margin-top: auto;
        padding-top: 1rem;
        border-top: 1px solid #ccc;
        display: flex;
        justify-content: space-between;
        font-size: 0.8rem;
        color: #666;
    }

    h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-serif);
    }

    a {
        color: inherit;
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
</style>
